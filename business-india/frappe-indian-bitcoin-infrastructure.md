# üáÆüá≥ Frappe-Based Indian Bitcoin Business Infrastructure
## Complete Compliance with Minimal Development

### üéØ Why Frappe for Indian Bitcoin Business?

**Perfect Indian Compliance Match:**
- ‚úÖ **GST Ready**: Built-in Indian GST in ERPNext
- ‚úÖ **TDS Handling**: Automatic tax deduction workflows
- ‚úÖ **Indian Accounting**: Tally-like chart of accounts
- ‚úÖ **Multi-lingual**: Hindi, English, regional languages
- ‚úÖ **Indian Reports**: GSTR-1, GSTR-3B, Form 26Q built-in
- ‚úÖ **E-invoicing**: IRN generation support
- ‚úÖ **Indian Banking**: Cheque printing, RTGS/NEFT formats

## üèóÔ∏è Indian Frappe Bitcoin Architecture

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                 FRAPPE INDIAN BITCOIN SUITE                      ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                  ‚îÇ
‚îÇ  üáÆüá≥ INDIAN COMPLIANCE APPS                                     ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ ERPNext (with India Compliance)                           ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ Bitcoin India App (Custom)                                ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ GST Crypto Module                                         ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ TDS Section 194S Handler                                  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ Indian Exchange Integration                               ‚îÇ
‚îÇ                                                                  ‚îÇ
‚îÇ  üìä INDIAN REPORTS (Built-in)                                  ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ GSTR-1 with Crypto Sales                                  ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ GSTR-3B Auto-calculation                                  ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ TDS Returns (Form 26Q)                                    ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ Schedule VDA Reports                                      ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ Audit Trail for Crypto                                    ‚îÇ
‚îÇ                                                                  ‚îÇ
‚îÇ  üîå INDIAN INTEGRATIONS                                        ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ GST Portal API                                            ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ Indian Bank APIs                                          ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ WazirX/CoinDCX Integration                                ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ UPI Payment Bridge                                        ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ Tally Export                                              ‚îÇ
‚îÇ                                                                  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## üì¶ Indian Bitcoin Frappe Apps

### 1. Bitcoin India App Structure
```bash
# Create India-specific Bitcoin app
bench new-app bitcoin_india

bitcoin_india/
‚îú‚îÄ‚îÄ bitcoin_india/
‚îÇ   ‚îú‚îÄ‚îÄ bitcoin_india/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ doctype/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ bitcoin_invoice_india/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ crypto_tds_deduction/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ crypto_gst_settings/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ indian_exchange_rate/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ vda_transaction/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ india_compliance/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ gst_integration/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ tds_management/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ reports/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ crypto_gstr1/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ tds_194s_return/
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ schedule_vda/
‚îÇ   ‚îú‚îÄ‚îÄ hooks.py
‚îÇ   ‚îî‚îÄ‚îÄ patches.txt
```

### 2. Indian Compliance DocTypes

**Bitcoin Invoice India (Enhanced)**
```python
# bitcoin_india/bitcoin_india/doctype/bitcoin_invoice_india/bitcoin_invoice_india.py
import frappe
from frappe.model.document import Document
from erpnext.controllers.taxes_and_totals import calculate_taxes_and_totals

class BitcoinInvoiceIndia(Document):
    def validate(self):
        self.validate_customer_kyc()
        self.calculate_gst()
        self.check_tds_applicability()
        self.set_exchange_rate()
        self.calculate_amounts()
    
    def validate_customer_kyc(self):
        """Validate customer KYC for compliance"""
        if self.grand_total > 10000:  # ‚Çπ10,000
            customer = frappe.get_doc("Customer", self.customer)
            if not customer.pan:
                frappe.throw(_("Customer PAN is mandatory for transactions above ‚Çπ10,000"))
            
            # Validate PAN format
            import re
            pan_pattern = r'^[A-Z]{5}[0-9]{4}[A-Z]{1}$'
            if not re.match(pan_pattern, customer.pan):
                frappe.throw(_("Invalid PAN format"))
    
    def calculate_gst(self):
        """Calculate GST based on supply type"""
        if not self.customer_gstin:
            # B2C transaction
            self.gst_category = "Unregistered"
            self.gst_treatment = "consumer"
        else:
            # B2B transaction
            self.gst_category = "Registered Regular"
            
            # Check if inter-state or intra-state
            company_gstin = frappe.get_value("Company", self.company, "gstin")
            if company_gstin[:2] == self.customer_gstin[:2]:
                self.supply_type = "Intra State"
                self.cgst_rate = 9
                self.sgst_rate = 9
                self.igst_rate = 0
            else:
                self.supply_type = "Inter State"
                self.cgst_rate = 0
                self.sgst_rate = 0
                self.igst_rate = 18
    
    def check_tds_applicability(self):
        """Check if TDS under section 194S is applicable"""
        # Get customer's annual crypto transactions
        annual_crypto_value = self.get_annual_crypto_transactions()
        
        if self.grand_total >= 10000 or annual_crypto_value >= 50000:
            self.tds_applicable = 1
            self.tds_section = "194S"
            self.tds_rate = 1.0  # 1%
            self.tds_amount = self.grand_total * 0.01
            self.net_payable = self.grand_total - self.tds_amount
        else:
            self.tds_applicable = 0
            self.tds_amount = 0
            self.net_payable = self.grand_total
    
    def on_submit(self):
        """Create TDS entry and GST records on submit"""
        if self.tds_applicable:
            self.create_tds_entry()
        
        # Create GST entry
        self.create_gst_entry()
        
        # Create BTCPay invoice
        self.create_btcpay_invoice()
        
        # Update e-invoice status
        if self.grand_total >= 50000:  # e-invoice threshold
            self.queue_einvoice_generation()
    
    def create_tds_entry(self):
        """Create TDS deduction entry"""
        tds_entry = frappe.new_doc("Crypto TDS Deduction")
        tds_entry.customer = self.customer
        tds_entry.customer_pan = frappe.get_value("Customer", self.customer, "pan")
        tds_entry.invoice_reference = self.name
        tds_entry.transaction_date = self.posting_date
        tds_entry.gross_amount = self.grand_total
        tds_entry.tds_rate = self.tds_rate
        tds_entry.tds_amount = self.tds_amount
        tds_entry.net_amount = self.net_payable
        tds_entry.section = "194S"
        tds_entry.nature_of_payment = "Transfer of Virtual Digital Asset"
        tds_entry.insert()
        tds_entry.submit()
    
    def create_gst_entry(self):
        """Create GST records for filing"""
        gst_entry = {
            "invoice_number": self.name,
            "invoice_date": self.posting_date,
            "customer_gstin": self.customer_gstin or "URP",  # Unregistered person
            "supply_type": self.supply_type,
            "hsn_code": "998599",  # Other information technology services
            "taxable_value": self.net_total,
            "cgst_amount": self.cgst_amount,
            "sgst_amount": self.sgst_amount,
            "igst_amount": self.igst_amount,
            "total_value": self.grand_total
        }
        
        # Add to GSTR-1 queue
        frappe.get_doc({
            "doctype": "GST Invoice Queue",
            "invoice_type": "Bitcoin Invoice India",
            "invoice_name": self.name,
            "gst_data": json.dumps(gst_entry),
            "month": self.posting_date.strftime("%m"),
            "year": self.posting_date.strftime("%Y")
        }).insert()
```

**Crypto TDS Deduction DocType**
```json
{
    "name": "Crypto TDS Deduction",
    "module": "Bitcoin India",
    "doctype": "DocType",
    "naming_rule": "Expression",
    "autoname": "TDS-194S-.YY.-.MM.-.#####",
    "fields": [
        {
            "fieldname": "customer",
            "label": "Customer",
            "fieldtype": "Link",
            "options": "Customer",
            "reqd": 1
        },
        {
            "fieldname": "customer_pan",
            "label": "Customer PAN",
            "fieldtype": "Data",
            "reqd": 1,
            "length": 10
        },
        {
            "fieldname": "section",
            "label": "TDS Section",
            "fieldtype": "Data",
            "default": "194S",
            "read_only": 1
        },
        {
            "fieldname": "gross_amount",
            "label": "Gross Amount",
            "fieldtype": "Currency",
            "reqd": 1
        },
        {
            "fieldname": "tds_rate",
            "label": "TDS Rate (%)",
            "fieldtype": "Float",
            "default": 1.0,
            "read_only": 1
        },
        {
            "fieldname": "tds_amount",
            "label": "TDS Amount",
            "fieldtype": "Currency",
            "read_only": 1
        },
        {
            "fieldname": "net_amount",
            "label": "Net Amount",
            "fieldtype": "Currency",
            "read_only": 1
        },
        {
            "fieldname": "challan_number",
            "label": "Challan Number",
            "fieldtype": "Data"
        },
        {
            "fieldname": "challan_date",
            "label": "Challan Date",
            "fieldtype": "Date"
        },
        {
            "fieldname": "quarter",
            "label": "Quarter",
            "fieldtype": "Select",
            "options": "Q1\nQ2\nQ3\nQ4"
        }
    ]
}
```

### 3. GST Integration Module
```python
# bitcoin_india/bitcoin_india/gst_integration/gst_crypto.py
import frappe
from frappe import _
from erpnext.regional.india.utils import get_gst_accounts

class GSTCryptoHandler:
    def __init__(self, invoice):
        self.invoice = invoice
        self.company_gstin = frappe.get_value("Company", invoice.company, "gstin")
        
    def create_gst_invoice(self):
        """Create GST compliant invoice for crypto transaction"""
        gst_invoice = {
            "version": "1.1",
            "tran_dtls": {
                "tax_sch": "GST",
                "sup_typ": "B2B" if self.invoice.customer_gstin else "B2C",
                "reg_rev": "N",
                "igst_on_intra": "N"
            },
            "doc_dtls": {
                "typ": "INV",
                "no": self.invoice.name,
                "dt": self.invoice.posting_date.strftime("%d/%m/%Y")
            },
            "seller_dtls": self.get_seller_details(),
            "buyer_dtls": self.get_buyer_details(),
            "item_list": self.get_item_list(),
            "val_dtls": self.get_value_details()
        }
        
        # Add crypto-specific details
        gst_invoice["crypto_dtls"] = {
            "btc_address": self.invoice.bitcoin_address,
            "btc_amount": self.invoice.amount_btc,
            "exchange_rate": self.invoice.exchange_rate,
            "payment_type": "Virtual Digital Asset"
        }
        
        return gst_invoice
    
    def generate_einvoice_qr(self):
        """Generate e-invoice QR code with crypto details"""
        import qrcode
        import json
        
        qr_data = {
            "gstin": self.company_gstin,
            "invoice": self.invoice.name,
            "date": self.invoice.posting_date.strftime("%Y-%m-%d"),
            "total": self.invoice.grand_total,
            "hsn": "998599",
            "crypto": "Y",
            "btc_amt": self.invoice.amount_btc
        }
        
        qr = qrcode.QRCode(version=1, box_size=10, border=5)
        qr.add_data(json.dumps(qr_data))
        qr.make(fit=True)
        
        return qr.make_image(fill_color="black", back_color="white")
```

### 4. TDS Management System
```python
# bitcoin_india/bitcoin_india/tds_management/tds_processor.py
import frappe
from frappe import _
from datetime import datetime

class TDS194SProcessor:
    def __init__(self):
        self.tds_rate = 0.01  # 1%
        self.single_threshold = 10000
        self.annual_threshold = 50000
        
    def process_crypto_payment(self, payment):
        """Process crypto payment for TDS compliance"""
        customer = frappe.get_doc("Customer", payment.customer)
        
        # Check PAN availability
        if not customer.pan:
            if payment.amount >= self.single_threshold:
                frappe.throw(_("PAN required for crypto transactions >= ‚Çπ10,000"))
        
        # Check thresholds
        annual_total = self.get_annual_crypto_value(customer.name)
        
        if payment.amount >= self.single_threshold or \
           (annual_total + payment.amount) >= self.annual_threshold:
            return self.deduct_tds(payment, customer)
        
        return None
    
    def deduct_tds(self, payment, customer):
        """Deduct TDS and create records"""
        tds_amount = payment.amount * self.tds_rate
        
        # Create TDS entry
        tds_doc = frappe.new_doc("Crypto TDS Deduction")
        tds_doc.update({
            "customer": customer.name,
            "customer_pan": customer.pan,
            "transaction_date": payment.date,
            "gross_amount": payment.amount,
            "tds_rate": self.tds_rate * 100,
            "tds_amount": tds_amount,
            "net_amount": payment.amount - tds_amount,
            "invoice_reference": payment.reference,
            "quarter": self.get_quarter(payment.date)
        })
        tds_doc.insert()
        
        # Update payment with TDS
        payment.tds_deducted = tds_amount
        payment.net_received = payment.amount - tds_amount
        
        return tds_doc
    
    def generate_form_26q(self, quarter, year):
        """Generate Form 26Q for quarterly TDS return"""
        tds_entries = frappe.get_all(
            "Crypto TDS Deduction",
            filters={
                "quarter": quarter,
                "year": year,
                "docstatus": 1
            },
            fields=["*"]
        )
        
        form_26q = {
            "form_type": "26Q",
            "quarter": quarter,
            "year": year,
            "tan": frappe.get_value("Company", frappe.defaults.get_user_default("Company"), "tan"),
            "statements": []
        }
        
        for entry in tds_entries:
            statement = {
                "section": "194S",
                "pan": entry.customer_pan,
                "name": frappe.get_value("Customer", entry.customer, "customer_name"),
                "payment_date": entry.transaction_date,
                "gross_amount": entry.gross_amount,
                "tds_rate": entry.tds_rate,
                "tds_amount": entry.tds_amount,
                "nature": "Transfer of Virtual Digital Asset"
            }
            form_26q["statements"].append(statement)
        
        return form_26q
```

### 5. Indian Exchange Integration
```python
# bitcoin_india/bitcoin_india/exchange_integration/indian_exchanges.py
import frappe
import requests
from frappe import _

class IndianExchangeConnector:
    def __init__(self):
        self.exchanges = {
            "wazirx": WazirXConnector(),
            "coindcx": CoinDCXConnector(),
            "zebpay": ZebpayConnector()
        }
    
    def get_best_rate(self, currency_pair="btcinr"):
        """Get best rate from Indian exchanges"""
        rates = {}
        
        for name, exchange in self.exchanges.items():
            try:
                rate = exchange.get_rate(currency_pair)
                rates[name] = rate
            except:
                pass
        
        if rates:
            best_exchange = min(rates, key=rates.get)
            return {
                "exchange": best_exchange,
                "rate": rates[best_exchange],
                "all_rates": rates
            }
        
        return None

class WazirXConnector:
    def __init__(self):
        self.api_url = "https://api.wazirx.com/api/v2"
        self.api_key = frappe.get_single("Bitcoin India Settings").wazirx_api_key
        self.api_secret = frappe.get_single("Bitcoin India Settings").wazirx_api_secret
    
    def get_rate(self, pair="btcinr"):
        """Get current BTC/INR rate"""
        response = requests.get(f"{self.api_url}/tickers/{pair}")
        if response.status_code == 200:
            data = response.json()
            return float(data["ticker"]["last"])
    
    def create_withdrawal(self, amount_btc, address):
        """Withdraw Bitcoin to address"""
        # Implementation for WazirX withdrawal API
        pass
    
    def get_deposit_address(self):
        """Get Bitcoin deposit address"""
        # Implementation for WazirX deposit API
        pass
```

### 6. UPI Integration for Bitcoin
```python
# bitcoin_india/bitcoin_india/upi_integration/upi_bridge.py
import frappe
from frappe import _
import qrcode

class UPIBitcoinBridge:
    def __init__(self):
        self.upi_id = frappe.get_single("Bitcoin India Settings").business_upi_id
        
    def generate_unified_qr(self, bitcoin_invoice):
        """Generate QR with both UPI and Bitcoin payment options"""
        # Create unified payment data
        unified_data = {
            "version": "1.0",
            "merchant": bitcoin_invoice.company,
            "invoice": bitcoin_invoice.name,
            "amount_inr": bitcoin_invoice.grand_total,
            "payment_options": {
                "bitcoin": {
                    "address": bitcoin_invoice.bitcoin_address,
                    "amount_btc": bitcoin_invoice.amount_btc,
                    "lightning": bitcoin_invoice.lightning_invoice
                },
                "upi": {
                    "vpa": self.upi_id,
                    "amount": bitcoin_invoice.grand_total,
                    "note": f"Invoice {bitcoin_invoice.name}"
                }
            }
        }
        
        # Generate Bharat QR compatible code
        bharat_qr = self.generate_bharat_qr(unified_data)
        
        return bharat_qr
    
    def generate_bharat_qr(self, data):
        """Generate Bharat QR compatible code"""
        # Bharat QR format implementation
        qr_string = f"upi://pay?pa={self.upi_id}&pn={data['merchant']}&am={data['amount_inr']}&tn={data['invoice']}"
        
        qr = qrcode.QRCode(version=1, box_size=10, border=5)
        qr.add_data(qr_string)
        qr.make(fit=True)
        
        return qr.make_image(fill_color="black", back_color="white")
```

### 7. Indian Reports
```python
# bitcoin_india/bitcoin_india/reports/crypto_gstr1/crypto_gstr1.py
import frappe
from frappe import _

def execute(filters=None):
    columns = get_columns()
    data = get_data(filters)
    return columns, data

def get_columns():
    return [
        {"label": _("GSTIN/UIN"), "fieldname": "gstin", "width": 150},
        {"label": _("Invoice No"), "fieldname": "invoice_no", "width": 120},
        {"label": _("Invoice Date"), "fieldname": "invoice_date", "width": 100},
        {"label": _("Invoice Value"), "fieldname": "invoice_value", "fieldtype": "Currency", "width": 120},
        {"label": _("Place of Supply"), "fieldname": "place_of_supply", "width": 120},
        {"label": _("Reverse Charge"), "fieldname": "reverse_charge", "width": 80},
        {"label": _("Invoice Type"), "fieldname": "invoice_type", "width": 100},
        {"label": _("HSN"), "fieldname": "hsn", "width": 100},
        {"label": _("Taxable Value"), "fieldname": "taxable_value", "fieldtype": "Currency", "width": 120},
        {"label": _("CGST"), "fieldname": "cgst", "fieldtype": "Currency", "width": 100},
        {"label": _("SGST"), "fieldname": "sgst", "fieldtype": "Currency", "width": 100},
        {"label": _("IGST"), "fieldname": "igst", "fieldtype": "Currency", "width": 100},
        {"label": _("Crypto Transaction"), "fieldname": "is_crypto", "width": 80}
    ]

def get_data(filters):
    conditions = get_conditions(filters)
    
    data = frappe.db.sql("""
        SELECT
            IFNULL(c.gstin, 'URP') as gstin,
            bi.name as invoice_no,
            bi.posting_date as invoice_date,
            bi.grand_total as invoice_value,
            bi.place_of_supply,
            'N' as reverse_charge,
            'Regular' as invoice_type,
            '998599' as hsn,
            bi.net_total as taxable_value,
            bi.cgst_amount as cgst,
            bi.sgst_amount as sgst,
            bi.igst_amount as igst,
            'Y' as is_crypto
        FROM `tabBitcoin Invoice India` bi
        LEFT JOIN `tabCustomer` c ON bi.customer = c.name
        WHERE bi.docstatus = 1 {conditions}
        ORDER BY bi.posting_date
    """.format(conditions=conditions), filters, as_dict=1)
    
    return data
```

### 8. Compliance Dashboard
```python
# bitcoin_india/bitcoin_india/page/crypto_compliance_dashboard/crypto_compliance_dashboard.js
frappe.pages['crypto-compliance-dashboard'].on_page_load = function(wrapper) {
    var page = frappe.ui.make_app_page({
        parent: wrapper,
        title: 'üáÆüá≥ Crypto Compliance Dashboard',
        single_column: true
    });
    
    // Add filters
    page.add_field({
        fieldname: 'company',
        label: __('Company'),
        fieldtype: 'Link',
        options: 'Company',
        default: frappe.defaults.get_user_default('Company')
    });
    
    page.add_field({
        fieldname: 'period',
        label: __('Period'),
        fieldtype: 'Select',
        options: 'Monthly\nQuarterly\nYearly',
        default: 'Monthly'
    });
    
    // Create dashboard sections
    let dashboard_html = `
        <div class="crypto-compliance-dashboard">
            <div class="row">
                <div class="col-md-4">
                    <div class="card">
                        <div class="card-header">
                            <h4>TDS Compliance (194S)</h4>
                        </div>
                        <div class="card-body">
                            <div id="tds-summary"></div>
                            <button class="btn btn-primary btn-sm" onclick="generate_tds_return()">
                                Generate Form 26Q
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="col-md-4">
                    <div class="card">
                        <div class="card-header">
                            <h4>GST Compliance</h4>
                        </div>
                        <div class="card-body">
                            <div id="gst-summary"></div>
                            <button class="btn btn-primary btn-sm" onclick="prepare_gstr1()">
                                Prepare GSTR-1
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="col-md-4">
                    <div class="card">
                        <div class="card-header">
                            <h4>Income Tax (VDA)</h4>
                        </div>
                        <div class="card-body">
                            <div id="vda-summary"></div>
                            <button class="btn btn-primary btn-sm" onclick="generate_vda_report()">
                                Schedule VDA Report
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="row mt-4">
                <div class="col-md-12">
                    <div class="card">
                        <div class="card-header">
                            <h4>Compliance Calendar</h4>
                        </div>
                        <div class="card-body">
                            <div id="compliance-calendar"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    `;
    
    page.main.html(dashboard_html);
    
    // Load dashboard data
    load_compliance_data(page);
};

function load_compliance_data(page) {
    frappe.call({
        method: 'bitcoin_india.bitcoin_india.api.get_compliance_summary',
        args: {
            company: page.fields_dict.company.value,
            period: page.fields_dict.period.value
        },
        callback: function(r) {
            if (r.message) {
                update_dashboard(r.message);
            }
        }
    });
}
```

## üöÄ Deployment Script for Indian Business

```bash
#!/bin/bash
# deploy-frappe-bitcoin-india.sh

echo "üáÆüá≥ Deploying Frappe Bitcoin Infrastructure for Indian Business"

# Verify Indian compliance requirements
if [ -z "$COMPANY_GSTIN" ] || [ -z "$COMPANY_PAN" ] || [ -z "$COMPANY_TAN" ]; then
    echo "‚ùå Error: GSTIN, PAN, and TAN are required for Indian business"
    exit 1
fi

# Deploy Frappe with ERPNext
cd /opt/frappe-bitcoin
docker compose up -d

# Wait for services
sleep 60

# Create site with Indian configuration
docker compose exec frappe bench new-site bitcoin-india.local \
    --mariadb-root-password ${MYSQL_ROOT_PASSWORD} \
    --admin-password ${ADMIN_PASSWORD} \
    --install-app erpnext

# Install India Compliance app
docker compose exec frappe bench get-app india_compliance
docker compose exec frappe bench --site bitcoin-india.local install-app india_compliance

# Install Bitcoin India app
docker compose exec frappe bench get-app https://github.com/yourusername/bitcoin_india
docker compose exec frappe bench --site bitcoin-india.local install-app bitcoin_india

# Configure Indian settings
docker compose exec frappe bench --site bitcoin-india.local execute bitcoin_india.setup.configure_indian_compliance --args "{'gstin': '${COMPANY_GSTIN}', 'pan': '${COMPANY_PAN}', 'tan': '${COMPANY_TAN}'}"

# Create Indian chart of accounts
docker compose exec frappe bench --site bitcoin-india.local execute erpnext.setup.doctype.company.company.create_charts --args "{'company': '${COMPANY_NAME}', 'chart': 'India - Chart of Accounts'}"

# Setup GST accounts
docker compose exec frappe bench --site bitcoin-india.local execute india_compliance.gst_india.setup.setup_gst_settings

# Create crypto-specific accounts
docker compose exec frappe bench --site bitcoin-india.local execute bitcoin_india.setup.create_crypto_accounts

# Enable required features
docker compose exec frappe bench --site bitcoin-india.local set-config enable_einvoice 1
docker compose exec frappe bench --site bitcoin-india.local set-config enable_gst_api 1

# Create default tax templates
docker compose exec frappe bench --site bitcoin-india.local execute bitcoin_india.setup.create_tax_templates

echo "‚úÖ Indian Frappe Bitcoin Infrastructure Deployed!"
echo ""
echo "üåê Access: http://localhost"
echo "üë§ Login: Administrator / ${ADMIN_PASSWORD}"
echo ""
echo "üìã Next Steps:"
echo "1. Complete Company Setup with Indian details"
echo "2. Configure GST Settings"
echo "3. Set up TDS deduction accounts"
echo "4. Create Bitcoin payment modes"
echo "5. Test with small transactions"
```

## üìä Indian Compliance Benefits

With Frappe + Indian Apps:

1. **Automatic Compliance**
   - GST returns auto-generated
   - TDS calculated and tracked
   - E-invoicing ready
   - Audit trail maintained

2. **Multi-lingual Support**
   - Hindi interface available
   - Regional languages supported
   - SMS in local language
   - Bilingual invoices

3. **Indian Banking**
   - Bank reconciliation formats
   - Cheque printing
   - NEFT/RTGS integration
   - UPI payment tracking

4. **Tax Reports**
   - Schedule VDA auto-filled
   - Form 26Q generation
   - GSTR-1/3B with crypto
   - Advance tax calculation

---

**Your Indian Frappe Bitcoin business is ready! Full compliance with minimal code!** üáÆüá≥üöÄüíº